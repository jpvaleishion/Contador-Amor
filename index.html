<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para el Amor de Mi Vida üíñ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ========== RESET Y BASE ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --color-amor: #e63946;
            --color-amor-claro: #ff758c;
            --color-amor-oscuro: #d32f2f;
            --color-texto: #333;
            --color-fondo: linear-gradient(135deg, #ffafbd, #ffc3a0);
            --color-blanco: rgba(255, 255, 255, 0.95);
            --sombra: 0 15px 35px rgba(0, 0, 0, 0.2);
            --spotify-green: #1DB954;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--color-fondo);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--color-texto);
            transition: background 1.5s ease;
            overflow-x: hidden;
        }
        
        /* ========== ANIMACIONES ========== */
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        
        @keyframes bloom {
            0% { transform: scale(0.8) rotate(-5deg); opacity: 0; }
            100% { transform: scale(1) rotate(0); opacity: 1; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); }
            50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        @keyframes confettiFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px rgba(230, 57, 70, 0.5); }
            50% { text-shadow: 0 0 20px rgba(230, 57, 70, 0.8), 0 0 30px rgba(230, 57, 70, 0.6); }
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes musicNote {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
            50% { transform: translateY(-15px) rotate(10deg); opacity: 1; }
        }
        
        @keyframes photoGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
            50% { box-shadow: 0 8px 25px rgba(230, 57, 70, 0.3); }
        }
        
        @keyframes growPhotos {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* ========== CONTENEDOR PRINCIPAL ========== */
        .container {
            max-width: 900px;
            width: 100%;
            background-color: var(--color-blanco);
            border-radius: 25px;
            box-shadow: var(--sombra);
            overflow: hidden;
            position: relative;
            padding: 50px 40px;
            animation: bloom 1.2s ease-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* ========== GALER√çA DE FOTOS ========== */
        .photos-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px 0 50px;
            position: relative;
            animation: slideIn 1s ease-out 0.5s both;
        }
        
        .photos-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--color-amor);
            margin-bottom: 40px;
            text-align: center;
            position: relative;
            animation: glow 3s infinite alternate;
        }
        
        .photos-title:after {
            content: '';
            position: absolute;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--color-amor), transparent);
            bottom: -15px;
            left: 0;
            border-radius: 2px;
        }
        
        .photos-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
            animation: growPhotos 1.5s ease-out;
        }
        
        /* Ajuste para 5 fotos - la del medio m√°s grande */
        .photo-item {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.4s ease;
            cursor: pointer;
            aspect-ratio: 1/1;
            animation: photoGlow 4s infinite ease-in-out;
        }
        
        .photo-item:hover {
            transform: scale(1.08);
            z-index: 10;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            animation: none;
        }
        
        .photo-item:nth-child(3) {
            grid-column: span 1;
            transform: scale(1.1);
            z-index: 5;
        }
        
        .photo-item:nth-child(3):hover {
            transform: scale(1.18);
        }
        
        .photo-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .photo-item:hover .photo-img {
            transform: scale(1.1);
        }
        
        .photo-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: white;
            padding: 15px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            text-align: center;
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
        }
        
        .photo-item:hover .photo-overlay {
            transform: translateY(0);
        }
        
        .photos-caption {
            text-align: center;
            font-style: italic;
            color: #666;
            margin-top: 15px;
            font-size: 1.1rem;
            max-width: 600px;
            line-height: 1.6;
        }
        
        /* ========== MODAL PARA FOTOS AMPLIADAS ========== */
        .photo-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-content {
            max-width: 90%;
            max-height: 90%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: bloom 0.5s ease-out;
            position: relative;
        }
        
        .modal-photo {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2.5rem;
            color: white;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
        }
        
        .close-modal:hover {
            background: var(--color-amor);
            transform: rotate(90deg);
        }
        
        /* ========== REPRODUCTOR SPOTIFY ========== */
        .music-player {
            margin-bottom: 40px;
            text-align: center;
            animation: slideIn 0.8s ease-out 0.2s both;
        }
        
        .music-title {
            font-size: 1.4rem;
            color: var(--color-amor);
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .music-title i {
            color: var(--spotify-green);
            animation: musicNote 2s infinite;
        }
        
        .spotify-player {
            background: linear-gradient(45deg, rgba(29, 185, 84, 0.1), rgba(30, 215, 96, 0.05));
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(29, 185, 84, 0.2);
            transition: all 0.3s;
        }
        
        .spotify-player:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
            border-color: rgba(29, 185, 84, 0.3);
        }
        
        .spotify-iframe {
            border-radius: 12px;
            width: 100%;
            height: 152px;
            border: none;
        }
        
        .music-note {
            position: absolute;
            font-size: 1.8rem;
            opacity: 0.6;
            z-index: 0;
            animation: musicNote 3s infinite ease-in-out;
            pointer-events: none;
        }
        
        .note-1 { top: 15%; left: 8%; animation-delay: 0s; color: var(--spotify-green); }
        .note-2 { top: 20%; right: 10%; animation-delay: 0.5s; color: #ff6b8b; }
        .note-3 { bottom: 25%; left: 9%; animation-delay: 1s; color: var(--spotify-green); }
        
        /* ========== DECORACIONES ========== */
        .floating-heart {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0.6;
            z-index: 0;
            animation: float 4s infinite ease-in-out;
            pointer-events: none;
        }
        
        .heart-1 { top: 8%; left: 6%; animation-delay: 0s; color: #ff6b8b; }
        .heart-2 { top: 12%; right: 8%; animation-delay: 0.5s; color: #ff8e8e; }
        .heart-3 { bottom: 18%; left: 7%; animation-delay: 1s; color: #ffafbd; }
        .heart-4 { bottom: 12%; right: 9%; animation-delay: 1.5s; color: #ffc3a0; }
        
        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff;
            animation: sparkle 2s infinite;
            pointer-events: none;
        }
        
        /* ========== ENCABEZADO ========== */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }
        
        .header h1 {
            color: var(--color-amor);
            font-size: 3.2rem;
            margin-bottom: 15px;
            font-family: 'Dancing Script', cursive;
            position: relative;
            display: inline-block;
            animation: glow 3s infinite alternate;
        }
        
        .header h1:after {
            content: '';
            position: absolute;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, transparent, var(--color-amor), transparent);
            bottom: -15px;
            left: 0;
            border-radius: 2px;
        }
        
        .heart-icon {
            color: var(--color-amor);
            font-size: 2.2rem;
            margin: 0 15px;
            animation: heartbeat 1.5s infinite;
            display: inline-block;
        }
        
        /* ========== MENSAJE ========== */
        .message {
            font-size: 1.5rem;
            line-height: 1.9;
            text-align: center;
            margin-bottom: 40px;
            padding: 0 25px;
            color: #555;
            position: relative;
            z-index: 1;
            animation: slideIn 1s ease-out;
        }
        
        .message p {
            margin-bottom: 25px;
            position: relative;
        }
        
        .princess {
            color: var(--color-amor);
            font-weight: bold;
            font-style: italic;
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .new-beginning {
            display: inline-block;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            border: 2px dashed var(--color-amor);
            border-radius: 12px;
            padding: 12px 20px;
            margin-top: 15px;
            font-size: 1.1rem;
            color: var(--color-amor);
            font-weight: 600;
            animation: pulse 2s infinite;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .new-beginning:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        /* ========== CONTADOR ========== */
        .timer-container {
            background: linear-gradient(45deg, var(--color-amor-claro), #ff7eb3);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            color: white;
            margin-top: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            z-index: 1;
            animation: slideIn 1.2s ease-out 0.3s both;
        }
        
        .timer-container:before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: float 20s infinite linear;
            z-index: -1;
        }
        
        .timer-title {
            font-size: 2rem;
            margin-bottom: 35px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
            animation: fadeIn 1s ease-out;
        }
        
        .sync-status {
            background-color: rgba(255, 255, 255, 0.25);
            border-radius: 12px;
            padding: 12px 20px;
            margin-bottom: 25px;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            justify-content: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: pulse 3s infinite;
        }
        
        .timer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 35px;
        }
        
        .time-unit {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px 20px;
            min-width: 120px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .time-unit:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .time-unit:hover:before {
            left: 100%;
        }
        
        .time-unit:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }
        
        .time-value {
            font-size: 3.2rem;
            font-weight: 800;
            margin-bottom: 8px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Poppins', sans-serif;
            letter-spacing: 2px;
        }
        
        .time-label {
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
            opacity: 0.9;
        }
        
        .highlight {
            background-color: rgba(255, 255, 255, 0.3);
            border: 2px solid white;
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.4);
            animation: pulse 2s infinite !important;
        }
        
        /* ========== BOT√ìN REINICIAR ========== */
        .reset-btn {
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
            color: var(--color-amor);
            border: none;
            border-radius: 12px;
            padding: 15px 35px;
            font-size: 1.2rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            font-weight: 700;
            margin-top: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .reset-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(230, 57, 70, 0.1), transparent);
            transition: left 0.5s;
            z-index: -1;
        }
        
        .reset-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
            color: var(--color-amor-oscuro);
        }
        
        .reset-btn:hover:before {
            left: 100%;
        }
        
        .reset-btn:active {
            transform: translateY(-2px);
        }
        
        /* ========== FIRMA ========== */
        .signature {
            text-align: right;
            margin-top: 50px;
            font-size: 1.8rem;
            color: var(--color-amor);
            font-style: italic;
            font-weight: 700;
            font-family: 'Dancing Script', cursive;
            position: relative;
            z-index: 1;
            animation: fadeIn 1.5s ease-out 0.5s both;
        }
        
        .signature i {
            margin-left: 10px;
            animation: heartbeat 1.5s infinite;
        }
        
        /* ========== PIE DE P√ÅGINA ========== */
        .footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.95rem;
            color: #777;
            position: relative;
            z-index: 1;
            animation: fadeIn 2s ease-out;
        }
        
        .footer-heart {
            color: var(--color-amor);
            animation: heartbeat 2s infinite;
            display: inline-block;
            margin: 0 5px;
        }
        
        /* ========== MENSAJES ESPECIALES ========== */
        .special-message {
            animation: slideIn 0.8s ease-out;
            margin-bottom: 25px;
        }
        
        .message-content {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            padding: 20px 30px;
            border-radius: 15px;
            color: white;
            text-align: center;
            font-weight: 700;
            font-size: 1.3rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .message-content:before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e, #ff6b6b);
            z-index: -1;
            filter: blur(20px);
            opacity: 0.6;
        }
        
        /* ========== BOT√ìN SONIDO ========== */
        .sound-btn {
            position: fixed;
            top: 25px;
            right: 25px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: var(--color-amor);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            transition: all 0.3s;
            animation: bloom 1s ease-out 1s both;
        }
        
        .sound-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            background: white;
        }
        
        /* ========== RESPONSIVE ========== */
        @media (max-width: 992px) {
            .container {
                padding: 40px 30px;
            }
            
            .header h1 {
                font-size: 2.8rem;
            }
            
            .timer {
                gap: 15px;
            }
            
            .time-unit {
                min-width: 110px;
                padding: 20px 15px;
            }
            
            .time-value {
                font-size: 2.8rem;
            }
            
            .photos-title {
                font-size: 2.2rem;
            }
            
            .photos-grid {
                max-width: 500px;
                gap: 12px;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .container {
                padding: 35px 25px;
                border-radius: 20px;
            }
            
            .header h1 {
                font-size: 2.4rem;
            }
            
            .heart-icon {
                font-size: 1.8rem;
                margin: 0 10px;
            }
            
            .message {
                font-size: 1.3rem;
                padding: 0 15px;
            }
            
            .music-player {
                margin-bottom: 30px;
            }
            
            .music-title {
                font-size: 1.2rem;
            }
            
            .timer-container {
                padding: 30px 20px;
            }
            
            .timer-title {
                font-size: 1.7rem;
            }
            
            .timer {
                gap: 10px;
            }
            
            .time-unit {
                min-width: 100px;
                padding: 18px 12px;
            }
            
            .time-value {
                font-size: 2.4rem;
                height: 50px;
            }
            
            .time-label {
                font-size: 1rem;
            }
            
            .reset-btn {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
            
            .sound-btn {
                top: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
            }
            
            .photos-title {
                font-size: 2rem;
                margin-bottom: 30px;
            }
            
            .photos-grid {
                max-width: 450px;
                gap: 10px;
            }
            
            .photo-overlay {
                padding: 10px;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 576px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .message {
                font-size: 1.2rem;
            }
            
            .music-title {
                font-size: 1.1rem;
                flex-direction: column;
                gap: 5px;
            }
            
            .spotify-iframe {
                height: 152px;
            }
            
            .timer {
                gap: 8px;
            }
            
            .time-unit {
                min-width: 85px;
                padding: 15px 10px;
            }
            
            .time-value {
                font-size: 2rem;
                height: 45px;
            }
            
            .timer-title {
                font-size: 1.5rem;
            }
            
            .sync-status {
                font-size: 0.9rem;
                padding: 10px 15px;
            }
            
            .new-beginning {
                font-size: 1rem;
                padding: 10px 15px;
            }
            
            .signature {
                font-size: 1.5rem;
            }
            
            .sound-btn {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }
            
            .photos-title {
                font-size: 1.8rem;
                margin-bottom: 25px;
            }
            
            .photos-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: 350px;
                gap: 10px;
            }
            
            .photo-item:nth-child(3) {
                grid-column: span 2;
                transform: scale(1.05);
            }
            
            .photo-item:nth-child(3):hover {
                transform: scale(1.13);
            }
            
            .photos-caption {
                font-size: 1rem;
                padding: 0 10px;
            }
        }
        
        @media (max-width: 480px) {
            .time-unit {
                min-width: 75px;
                padding: 12px 8px;
            }
            
            .time-value {
                font-size: 1.8rem;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .message {
                font-size: 1.1rem;
            }
            
            .spotify-iframe {
                height: 152px;
            }
            
            .photos-title {
                font-size: 1.6rem;
                margin-bottom: 20px;
            }
            
            .photos-grid {
                max-width: 300px;
                gap: 8px;
            }
            
            .photo-overlay {
                font-size: 0.9rem;
                padding: 8px;
            }
        }
        
        @media (max-width: 380px) {
            .photos-grid {
                max-width: 280px;
                gap: 6px;
            }
        }
    </style>
</head>
<body>
    <!-- Bot√≥n de sonido -->
    <button class="sound-btn" id="soundBtn" title="Activar sonidos">
        <i class="fas fa-volume-mute"></i>
    </button>
    
    <!-- Notas musicales decorativas -->
    <div class="music-note note-1"><i class="fas fa-music"></i></div>
    <div class="music-note note-2"><i class="fas fa-music"></i></div>
    <div class="music-note note-3"><i class="fas fa-music"></i></div>
    
    <!-- Corazones flotantes -->
    <div class="floating-heart heart-1"><i class="fas fa-heart"></i></div>
    <div class="floating-heart heart-2"><i class="fas fa-heart"></i></div>
    <div class="floating-heart heart-3"><i class="fas fa-heart"></i></div>
    <div class="floating-heart heart-4"><i class="fas fa-heart"></i></div>
    
    <!-- Modal para fotos ampliadas -->
    <div class="photo-modal" id="photoModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <img class="modal-photo" id="modalPhoto" src="" alt="Foto de amor">
        </div>
    </div>
    
    <!-- Contenedor principal -->
    <div class="container">
        <!-- Encabezado -->
        <div class="header">
            <h1>
                <i class="fas fa-heart heart-icon"></i>
                Para el Amor de Mi Vida
                <i class="fas fa-heart heart-icon"></i>
            </h1>
        </div>
        
        <!-- Galer√≠a de Fotos -->
        <div class="photos-container">
            <div class="photos-title">Nuestros Momentos Especiales</div>
            
            <div class="photos-grid">
                <!-- Foto 1 -->
                <div class="photo-item" data-photo="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor1.jpeg?raw=true">
                    <img class="photo-img" src="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor1.jpeg?raw=true" alt="Nuestro amor 1" loading="lazy">
                    <div class="photo-overlay">Recuerdo Especial #1</div>
                </div>
                
                <!-- Foto 2 -->
                <div class="photo-item" data-photo="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor2.jpeg?raw=true">
                    <img class="photo-img" src="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor2.jpeg?raw=true" alt="Nuestro amor 2" loading="lazy">
                    <div class="photo-overlay">Recuerdo Especial #2</div>
                </div>
                
                <!-- Foto 3 (Centro, m√°s grande) -->
                <div class="photo-item" data-photo="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor3.jpeg?raw=true">
                    <img class="photo-img" src="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor3.jpeg?raw=true" alt="Nuestro amor 3" loading="lazy">
                    <div class="photo-overlay">Mi Favorita ‚ù§Ô∏è</div>
                </div>
                
                <!-- Foto 4 -->
                <div class="photo-item" data-photo="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor4.jpeg?raw=true">
                    <img class="photo-img" src="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor4.jpeg?raw=true" alt="Nuestro amor 4" loading="lazy">
                    <div class="photo-overlay">Recuerdo Especial #4</div>
                </div>
                
                <!-- Foto 5 -->
                <div class="photo-item" data-photo="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor5.jpeg?raw=true">
                    <img class="photo-img" src="https://github.com/jpvaleishion/Contador-Amor/blob/main/images/amor5.jpeg?raw=true" alt="Nuestro amor 5" loading="lazy">
                    <div class="photo-overlay">Recuerdo Especial #5</div>
                </div>
            </div>
            
            <div class="photos-caption">
                Cada foto captura un momento especial de nuestro amor. Haz clic en cualquier foto para verla en grande.
            </div>
        </div>
        
        <!-- Reproductor de Spotify -->
        <div class="music-player">
            <div class="music-title">
                <i class="fab fa-spotify"></i>
                <span>Nuestra canci√≥n especial - La escucho y pienso en ti</span>
                <i class="fas fa-heart" style="color: var(--color-amor);"></i>
            </div>
            <div class="spotify-player">
                <iframe class="spotify-iframe" 
                        src="https://open.spotify.com/embed/track/0aaTGNeISpwMnq7jr0Xtf8?utm_source=generator&theme=0" 
                        allowfullscreen="" 
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                        loading="lazy">
                </iframe>
            </div>
        </div>
        
        <!-- Mensaje -->
        <div class="message">
            <p>Para el amor de mi vida, quiero que sepas, que todo este tiempo me la he pasado bien contigo, quiero que sigamos juntos hasta el √∫ltimo de nuestros d√≠as.</p>
            <p>Mi vida a tu lado ha sido mejor, t√∫ eres la mejor <span class="princess">mi princesa</span>.</p>
            <div class="new-beginning">
                <i class="fas fa-seedling" style="margin-right: 10px;"></i>
                Iniciando de nuevo
            </div>
        </div>
        
        <!-- Contenedor del contador -->
        <div class="timer-container">
            <!-- Mensajes especiales aparecen aqu√≠ -->
            <div id="specialMessages"></div>
            
            <div class="timer-title">Llevamos juntos en este nuevo comienzo:</div>
            
            <!-- Estado de sincronizaci√≥n -->
            <div class="sync-status" id="syncStatus">
                <i class="fas fa-sync-alt"></i>
                <span>Conectando con JSONBin...</span>
            </div>
            
            <!-- Contador -->
            <div class="timer">
                <div class="time-unit" id="years-unit">
                    <div class="time-value" id="years">0</div>
                    <div class="time-label">A√ëO</div>
                </div>
                <div class="time-unit" id="months-unit">
                    <div class="time-value" id="months">1</div>
                    <div class="time-label">MESES</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="days">0</div>
                    <div class="time-label">D√çAS</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="hours">00</div>
                    <div class="time-label">HORAS</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="minutes">00</div>
                    <div class="time-label">MINUTOS</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="seconds">00</div>
                    <div class="time-label">SEGUNDOS</div>
                </div>
            </div>
            
            <!-- Bot√≥n reiniciar -->
            <button class="reset-btn" id="resetBtn">
                <i class="fas fa-redo"></i>
                Reiniciar contador
            </button>
        </div>
        
        <!-- Firma -->
        <div class="signature">
            ‚Äî Te Amo <i class="fas fa-heart"></i>
        </div>
        
        <!-- Pie de p√°gina -->
        <div class="footer">
            <span class="footer-heart">‚ù§Ô∏è</span>
            Sincronizado con JSONBin.io | Funciona en todos los dispositivos
            <span class="footer-heart">‚ù§Ô∏è</span>
        </div>
    </div>

    <script>
        // ==============================================
        // CONFIGURACI√ìN JSONBIN.IO
        // ==============================================
        const JSONBIN_BIN_ID = '6989f89dae596e708f1dc562';
        const JSONBIN_API_KEY = '$2a$10$ZOrmLvQsR5eQwxIKCh/1eenfsFCKIKpenMsNwEHdAzpUHZQBx8bSW';
        
        const JSONBIN_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`;
        const JSONBIN_LATEST_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`;
        
        // ==============================================
        // VARIABLES GLOBALES
        // ==============================================
        let startDate = null;
        let isOnline = true;
        let soundEnabled = false;
        let specialMessagesShown = [];
        let spotifyAutoPlay = false;
        
        // ==============================================
        // INICIALIZACI√ìN
        // ==============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Contador de Amor - Iniciando...');
            
            // Crear chispas decorativas
            createSparkles();
            
            // Crear corazones flotantes continuos
            startFloatingHearts();
            
            // Configurar bot√≥n de sonido
            setupSoundButton();
            
            // Configurar fondo seg√∫n hora
            updateBackgroundByTime();
            setInterval(updateBackgroundByTime, 600000); // Cada 10 minutos
            
            // Configurar funcionalidad de fotos
            setupPhotoGallery();
            
            // Cargar fecha inicial
            loadStartDate();
            
            // Configurar eventos
            document.getElementById('resetBtn').addEventListener('click', resetTimer);
            
            // Detectar conexi√≥n
            window.addEventListener('online', handleOnline);
            window.addEventListener('offline', handleOffline);
            
            // Iniciar animaciones
            startAnimations();
            
            // Configurar Spotify
            setupSpotify();
        });
        
        // ==============================================
        // GALER√çA DE FOTOS
        // ==============================================
        function setupPhotoGallery() {
            const photoItems = document.querySelectorAll('.photo-item');
            const modal = document.getElementById('photoModal');
            const modalPhoto = document.getElementById('modalPhoto');
            const closeModal = document.getElementById('closeModal');
            
            // A√±adir eventos a cada foto
            photoItems.forEach(item => {
                item.addEventListener('click', function() {
                    const photoUrl = this.getAttribute('data-photo');
                    modalPhoto.src = photoUrl;
                    modal.style.display = 'flex';
                    
                    // Reproducir sonido si est√° activado
                    if (soundEnabled) {
                        playPhotoClickSound();
                    }
                });
            });
            
            // Cerrar modal al hacer clic en la X
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Cerrar modal al hacer clic fuera de la imagen
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Cerrar modal con tecla Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.style.display === 'flex') {
                    modal.style.display = 'none';
                }
            });
        }
        
        function playPhotoClickSound() {
            if (!soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 523.25; // Nota C
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
                
            } catch (e) {
                console.log('üîá Sonidos no disponibles');
            }
        }
        
        // ==============================================
        // SPOTIFY INTEGRATION
        // ==============================================
        function setupSpotify() {
            // Crear notas musicales adicionales
            createMusicNotes();
            
            // Intentar autoplay despu√©s de 3 segundos (si el usuario interact√∫a)
            setTimeout(() => {
                if (soundEnabled) {
                    enableSpotifyAutoplay();
                }
            }, 3000);
        }
        
        function createMusicNotes() {
            // A√±adir m√°s notas musicales din√°micamente
            setInterval(() => {
                if (Math.random() > 0.8) {
                    createFloatingMusicNote();
                }
            }, 5000);
        }
        
        function createFloatingMusicNote() {
            const note = document.createElement('div');
            note.innerHTML = '<i class="fas fa-music"></i>';
            note.style.position = 'fixed';
            note.style.fontSize = Math.random() * 20 + 15 + 'px';
            note.style.left = Math.random() * 100 + 'vw';
            note.style.top = '100vh';
            note.style.opacity = '0.5';
            note.style.zIndex = '9996';
            note.style.color = Math.random() > 0.5 ? 'var(--spotify-green)' : 'var(--color-amor)';
            note.style.pointerEvents = 'none';
            note.style.animation = `floatUp ${Math.random() * 6 + 4}s linear forwards`;
            
            document.body.appendChild(note);
            
            setTimeout(() => note.remove(), 7000);
        }
        
        function enableSpotifyAutoplay() {
            // Nota: Spotify no permite autoplay autom√°tico por pol√≠ticas de navegador
            // El usuario debe hacer clic manualmente en play
            console.log('üéµ Spotify listo - Haz clic en play para escuchar');
            
            // Podemos mostrar un mensaje suave
            if (!spotifyAutoPlay) {
                setTimeout(() => {
                    const musicTitle = document.querySelector('.music-title');
                    const originalText = musicTitle.innerHTML;
                    
                    // A√±adir instrucci√≥n sutil
                    const instruction = document.createElement('div');
                    instruction.style.fontSize = '0.8rem';
                    instruction.style.marginTop = '5px';
                    instruction.style.opacity = '0.7';
                    instruction.style.fontStyle = 'italic';
                    instruction.innerHTML = '(Haz clic en play para escuchar nuestra canci√≥n)';
                    
                    musicTitle.appendChild(instruction);
                    
                    // Remover despu√©s de 10 segundos
                    setTimeout(() => {
                        if (musicTitle.contains(instruction)) {
                            musicTitle.removeChild(instruction);
                        }
                    }, 10000);
                    
                    spotifyAutoPlay = true;
                }, 2000);
            }
        }
        
        // ==============================================
        // FUNCIONES PRINCIPALES
        // ==============================================
        async function loadStartDate() {
            updateSyncStatus('syncing');
            
            try {
                const jsonBinDate = await getDateFromJsonBin();
                
                if (jsonBinDate) {
                    startDate = jsonBinDate;
                    console.log('‚úÖ Fecha cargada desde JSONBin:', startDate.toLocaleString());
                } else {
                    await loadFromLocalStorage();
                }
                
                updateSyncStatus('connected');
                startTimer();
                startAutoSync();
                
            } catch (error) {
                console.error('‚ùå Error cargando fecha:', error);
                updateSyncStatus('error');
                await loadFromLocalStorage();
                startTimer();
            }
        }
        
        async function loadFromLocalStorage() {
            const localDate = localStorage.getItem('amor_fecha_inicio');
            
            if (localDate) {
                startDate = new Date(localDate);
                console.log('üìÅ Fecha cargada desde localStorage:', startDate.toLocaleString());
            } else {
                startDate = new Date();
                startDate.setMonth(startDate.getMonth() - 1);
                localStorage.setItem('amor_fecha_inicio', startDate.toISOString());
                console.log('üÜï Nueva fecha creada (hace 1 mes):', startDate.toLocaleString());
                
                // Intentar guardar en JSONBin
                const saved = await saveDateToJsonBin(startDate);
                if (saved) updateSyncStatus('connected');
            }
        }
        
        function startTimer() {
            updateTimer();
            setInterval(updateTimer, 1000);
        }
        
        function startAutoSync() {
            setInterval(syncWithJsonBin, 30000); // Cada 30 segundos
        }
        
        // ==============================================
        // FUNCI√ìN PRINCIPAL DEL CONTADOR
        // ==============================================
        function updateTimer() {
            if (!startDate) return;
            
            const now = new Date();
            const diff = now - startDate;
            
            const seconds = Math.floor(diff / 1000) % 60;
            const minutes = Math.floor(diff / (1000 * 60)) % 60;
            const hours = Math.floor(diff / (1000 * 60 * 60)) % 24;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            
            const years = Math.floor(days / 365);
            const remainingDaysAfterYears = days % 365;
            const months = Math.floor(remainingDaysAfterYears / 30);
            const remainingDays = remainingDaysAfterYears % 30;
            
            // Actualizar display
            document.getElementById('years').textContent = years;
            document.getElementById('months').textContent = months;
            document.getElementById('days').textContent = remainingDays;
            document.getElementById('hours').textContent = hours < 10 ? '0' + hours : hours;
            document.getElementById('minutes').textContent = minutes < 10 ? '0' + minutes : minutes;
            document.getElementById('seconds').textContent = seconds < 10 ? '0' + seconds : seconds;
            
            // Efectos visuales
            updateVisualEffects(years, months, remainingDays, hours, minutes, seconds);
            
            // Mensajes especiales
            checkSpecialMoments(days, hours, minutes, seconds);
            
            // Confeti en hitos importantes
            checkForConfetti(days, hours, minutes, seconds);
            
            // Efectos musicales especiales
            checkMusicEffects(days, hours, minutes, seconds);
            
            // Efectos en las fotos
            updatePhotoEffects(days, hours, minutes, seconds);
        }
        
        // ==============================================
        // EFECTOS EN LAS FOTOS
        // ==============================================
        function updatePhotoEffects(days, hours, minutes, seconds) {
            // Efecto especial cada hora exacta
            if (minutes === 0 && seconds === 0) {
                createPhotoSparkleEffect();
            }
            
            // Cambiar ligeramente el brillo de las fotos cada 30 segundos
            if (seconds % 30 === 0) {
                const photoItems = document.querySelectorAll('.photo-item');
                photoItems.forEach(item => {
                    item.style.filter = `brightness(${0.9 + Math.random() * 0.2})`;
                    item.style.transition = 'filter 1s ease';
                });
            }
        }
        
        function createPhotoSparkleEffect() {
            // Crear chispas alrededor de las fotos
            const photosContainer = document.querySelector('.photos-grid');
            const photosRect = photosContainer.getBoundingClientRect();
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.position = 'absolute';
                    sparkle.style.left = (Math.random() * photosRect.width) + 'px';
                    sparkle.style.top = (Math.random() * photosRect.height) + 'px';
                    sparkle.style.width = '12px';
                    sparkle.style.height = '12px';
                    sparkle.style.animation = 'sparkle 1.5s ease-out forwards';
                    
                    photosContainer.appendChild(sparkle);
                    
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 1500);
                }, i * 100);
            }
        }
        
        // ==============================================
        // EFECTOS VISUALES
        // ==============================================
        function updateVisualEffects(years, months, days, hours, minutes, seconds) {
            const yearsUnit = document.getElementById('years-unit');
            const monthsUnit = document.getElementById('months-unit');
            
            // Resaltar a√±os si es 0
            if (years === 0) {
                yearsUnit.classList.add('highlight');
            } else {
                yearsUnit.classList.remove('highlight');
            }
            
            // Resaltar meses si es 1 mes exacto
            if (months === 1 && days === 0 && hours === 0 && minutes === 0 && seconds < 5) {
                monthsUnit.classList.add('highlight');
            } else {
                monthsUnit.classList.remove('highlight');
            }
            
            // Efecto de pulso en segundos
            if (seconds === 0) {
                document.getElementById('seconds').parentElement.classList.add('highlight');
                setTimeout(() => {
                    document.getElementById('seconds').parentElement.classList.remove('highlight');
                }, 500);
            }
        }
        
        function updateBackgroundByTime() {
            const hour = new Date().getHours();
            const body = document.body;
            
            if (hour >= 5 && hour < 12) {
                body.style.background = 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)';
            } else if (hour >= 12 && hour < 17) {
                body.style.background = 'linear-gradient(135deg, #ffafbd 0%, #ffc3a0 100%)';
            } else if (hour >= 17 && hour < 20) {
                body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            } else {
                body.style.background = 'linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)';
            }
        }
        
        // ==============================================
        // EFECTOS MUSICALES ESPECIALES
        // ==============================================
        function checkMusicEffects(days, hours, minutes, seconds) {
            // Crear notas musicales especiales en momentos espec√≠ficos
            if (seconds === 0 && minutes % 15 === 0) {
                createSpecialMusicNote();
            }
            
            // Efecto especial cada hora exacta
            if (minutes === 0 && seconds === 0) {
                createHourlyMusicEffect();
            }
        }
        
        function createSpecialMusicNote() {
            const note = document.createElement('div');
            note.innerHTML = '<i class="fas fa-music"></i>';
            note.style.position = 'fixed';
            note.style.fontSize = '2.5rem';
            note.style.left = '50%';
            note.style.top = '50%';
            note.style.opacity = '0';
            note.style.zIndex = '9999';
            note.style.color = 'var(--spotify-green)';
            note.style.pointerEvents = 'none';
            note.style.transform = 'translate(-50%, -50%)';
            note.style.animation = 'fadeIn 0.5s ease-out, musicNote 1s ease-in-out 0.5s';
            
            document.body.appendChild(note);
            
            setTimeout(() => {
                note.style.opacity = '0';
                note.style.transition = 'opacity 0.5s';
                setTimeout(() => note.remove(), 500);
            }, 1500);
        }
        
        function createHourlyMusicEffect() {
            // Crear m√∫ltiples notas musicales
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFloatingMusicNote();
                }, i * 200);
            }
        }
        
        // ==============================================
        // MENSAJES ESPECIALES
        // ==============================================
        function checkSpecialMoments(days, hours, minutes, seconds) {
            const specialMoments = [
                { day: 7, message: "üéâ ¬°Una semana juntos! üéâ", emoji: "üéä" },
                { day: 14, message: "üíï ¬°Dos semanas de puro amor! üíï", emoji: "üíû" },
                { day: 30, message: "üéÇ ¬°FELIZ PRIMER MES! üéÇ", emoji: "üéÅ" },
                { day: 60, message: "‚ú® ¬°Dos meses de felicidad! ‚ú®", emoji: "üí´" },
                { day: 100, message: "üíØ ¬°100 d√≠as incre√≠bles! üíØ", emoji: "üèÜ" },
                { day: 365, message: "ü•≥ ¬°FELIZ PRIMER A√ëO! ü•≥", emoji: "üéÜ" }
            ];
            
            specialMoments.forEach(moment => {
                if (days === moment.day && hours === 0 && minutes === 0 && seconds < 10) {
                    if (!specialMessagesShown.includes(moment.day)) {
                        showSpecialMessage(moment.message, moment.emoji);
                        specialMessagesShown.push(moment.day);
                        
                        // Guardar en localStorage para no mostrar de nuevo
                        const shownMessages = JSON.parse(localStorage.getItem('shownMessages') || '[]');
                        if (!shownMessages.includes(moment.day)) {
                            shownMessages.push(moment.day);
                            localStorage.setItem('shownMessages', JSON.stringify(shownMessages));
                        }
                    }
                }
            });
        }
        
        function showSpecialMessage(message, emoji) {
            const messagesContainer = document.getElementById('specialMessages');
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'special-message';
            messageDiv.innerHTML = `
                <div class="message-content">
                    ${emoji} ${message} ${emoji}
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            
            // Reproducir sonido si est√° activado
            if (soundEnabled) {
                playCelebrationSound();
            }
            
            // Efectos visuales adicionales
            launchConfetti();
            createSpecialMusicNote();
            
            // Remover despu√©s de 15 segundos
            setTimeout(() => {
                messageDiv.style.opacity = '0';
                messageDiv.style.transition = 'opacity 1s';
                setTimeout(() => messageDiv.remove(), 1000);
            }, 15000);
        }
        
        // ==============================================
        // CONFETI Y EFECTOS ESPECIALES
        // ==============================================
        function checkForConfetti(days, hours, minutes, seconds) {
            // Confeti al cumplir 1 mes exacto
            if (days === 30 && hours === 0 && minutes === 0 && seconds < 10) {
                launchConfetti();
            }
            
            // Confeti cada 100 d√≠as
            if (days % 100 === 0 && hours === 0 && minutes === 0 && seconds < 10) {
                launchConfetti();
            }
        }
        
        function launchConfetti() {
            const confettiContainer = document.createElement('div');
            confettiContainer.style.position = 'fixed';
            confettiContainer.style.top = '0';
            confettiContainer.style.left = '0';
            confettiContainer.style.width = '100%';
            confettiContainer.style.height = '100%';
            confettiContainer.style.pointerEvents = 'none';
            confettiContainer.style.zIndex = '9998';
            
            const emojis = ['üíñ', 'üíï', 'üíò', 'üíù', 'üíó', 'üòç', 'ü•∞', '‚ù§Ô∏è', 'üíå', 'üéâ', '‚ú®', 'üåü', 'üéµ', 'üé∂'];
            
            for (let i = 0; i < 75; i++) {
                const confetti = document.createElement('div');
                confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                confetti.style.position = 'absolute';
                confetti.style.fontSize = Math.random() * 25 + 20 + 'px';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-50px';
                confetti.style.animation = `confettiFall ${Math.random() * 4 + 3}s linear forwards`;
                confetti.style.animationDelay = Math.random() * 2 + 's';
                
                confettiContainer.appendChild(confetti);
            }
            
            document.body.appendChild(confettiContainer);
            
            setTimeout(() => {
                document.body.removeChild(confettiContainer);
            }, 6000);
        }
        
        // ==============================================
        // ANIMACIONES DECORATIVAS
        // ==============================================
        function createSparkles() {
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + 'vw';
                sparkle.style.top = Math.random() * 100 + 'vh';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(sparkle);
            }
        }
        
        function startFloatingHearts() {
            setInterval(() => {
                if (Math.random() > 0.7) { // 30% de probabilidad
                    createFloatingHeart();
                }
            }, 3000);
        }
        
        function createFloatingHeart() {
            const heart = document.createElement('div');
            heart.innerHTML = 'üíñ';
            heart.style.position = 'fixed';
            heart.style.fontSize = Math.random() * 25 + 15 + 'px';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.top = '100vh';
            heart.style.opacity = '0.6';
            heart.style.zIndex = '9997';
            heart.style.pointerEvents = 'none';
            heart.style.animation = `floatUp ${Math.random() * 8 + 6}s linear forwards`;
            
            document.body.appendChild(heart);
            
            setTimeout(() => heart.remove(), 8000);
        }
        
        function startAnimations() {
            // Animaci√≥n inicial de entrada
            const elements = document.querySelectorAll('.header, .photos-container, .music-player, .message, .timer-container, .signature');
            elements.forEach((el, index) => {
                el.style.animationDelay = (index * 0.2) + 's';
            });
        }
        
        // ==============================================
        // SONIDOS
        // ==============================================
        function setupSoundButton() {
            const soundBtn = document.getElementById('soundBtn');
            
            // Cargar estado del sonido
            soundEnabled = localStorage.getItem('soundEnabled') === 'true';
            updateSoundButton(soundBtn);
            
            soundBtn.addEventListener('click', () => {
                soundEnabled = !soundEnabled;
                localStorage.setItem('soundEnabled', soundEnabled);
                updateSoundButton(soundBtn);
                
                if (soundEnabled) {
                    playHeartbeatSound();
                    enableSpotifyAutoplay();
                }
            });
        }
        
        function updateSoundButton(btn) {
            if (soundEnabled) {
                btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                btn.title = 'Desactivar sonidos';
            } else {
                btn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                btn.title = 'Activar sonidos';
            }
        }
        
        function playHeartbeatSound() {
            if (!soundEnabled) return;
            
            try {
                // Crear sonido de latido simple
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 120;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
                
            } catch (e) {
                console.log('üîá Sonidos no disponibles');
            }
        }
        
        function playCelebrationSound() {
            if (!soundEnabled) return;
            
            try {
                // Sonido de celebraci√≥n simple
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.value = 440 + (i * 100);
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                        
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.1);
                    }, i * 100);
                }
            } catch (e) {
                console.log('üîá Sonidos no disponibles');
            }
        }
        
        // ==============================================
        // JSONBIN.IO FUNCTIONS
        // ==============================================
        async function getDateFromJsonBin() {
            try {
                const response = await fetch(JSONBIN_LATEST_URL, {
                    headers: { 'X-Master-Key': JSONBIN_API_KEY }
                });
                
                if (!response.ok) throw new Error(`Error HTTP: ${response.status}`);
                
                const data = await response.json();
                return data.record?.startDate ? new Date(data.record.startDate) : null;
                
            } catch (error) {
                console.error('Error JSONBin:', error);
                return null;
            }
        }
        
        async function saveDateToJsonBin(date) {
            try {
                const response = await fetch(JSONBIN_URL, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_API_KEY
                    },
                    body: JSON.stringify({
                        startDate: date.toISOString(),
                        lastUpdated: new Date().toISOString()
                    })
                });
                
                return response.ok;
            } catch (error) {
                console.error('Error guardando JSONBin:', error);
                return false;
            }
        }
        
        async function syncWithJsonBin() {
            if (!isOnline) return;
            
            try {
                const jsonBinDate = await getDateFromJsonBin();
                if (jsonBinDate && startDate && jsonBinDate.getTime() !== startDate.getTime()) {
                    startDate = jsonBinDate;
                    localStorage.setItem('amor_fecha_inicio', startDate.toISOString());
                    updateSyncStatus('connected');
                }
            } catch (error) {
                console.log('Error sincronizaci√≥n:', error);
            }
        }
        
        // ==============================================
        // MANEJO DE CONEXI√ìN
        // ==============================================
        function handleOnline() {
            isOnline = true;
            console.log('üåê Conexi√≥n restaurada');
            updateSyncStatus('connected');
            syncWithJsonBin();
        }
        
        function handleOffline() {
            isOnline = false;
            console.log('üì¥ Sin conexi√≥n');
            updateSyncStatus('offline');
        }
        
        function updateSyncStatus(status) {
            const syncStatus = document.getElementById('syncStatus');
            const icon = syncStatus.querySelector('i');
            const text = syncStatus.querySelector('span');
            
            switch(status) {
                case 'connected':
                    syncStatus.style.background = 'rgba(144, 238, 144, 0.3)';
                    icon.className = 'fas fa-cloud';
                    text.textContent = '‚úÖ Sincronizado con JSONBin';
                    break;
                case 'syncing':
                    syncStatus.style.background = 'rgba(255, 255, 255, 0.25)';
                    icon.className = 'fas fa-sync-alt fa-spin';
                    text.textContent = '‚è≥ Sincronizando...';
                    break;
                case 'error':
                    syncStatus.style.background = 'rgba(255, 200, 100, 0.3)';
                    icon.className = 'fas fa-exclamation-triangle';
                    text.textContent = '‚ö†Ô∏è Error de conexi√≥n';
                    break;
                case 'offline':
                    syncStatus.style.background = 'rgba(255, 220, 100, 0.3)';
                    icon.className = 'fas fa-wifi-slash';
                    text.textContent = 'üì¥ Modo local';
                    break;
            }
        }
        
        // ==============================================
        // REINICIAR CONTADOR
        // ==============================================
        async function resetTimer() {
            if (!confirm('¬øEst√°s seguro de querer reiniciar el contador? Esto afectar√° a todos los dispositivos.')) {
                return;
            }
            
            const newStartDate = new Date();
            newStartDate.setMonth(newStartDate.getMonth() - 1);
            
            console.log('üîÑ Reiniciando contador a:', newStartDate.toLocaleString());
            
            // Guardar localmente
            localStorage.setItem('amor_fecha_inicio', newStartDate.toISOString());
            startDate = newStartDate;
            
            // Resetear mensajes mostrados
            specialMessagesShown = [];
            localStorage.removeItem('shownMessages');
            
            // Intentar guardar en JSONBin
            if (isOnline) {
                updateSyncStatus('syncing');
                const saved = await saveDateToJsonBin(newStartDate);
                
                if (saved) {
                    alert('‚úÖ ¬°Contador reiniciado en TODOS los dispositivos!');
                    updateSyncStatus('connected');
                    
                    // Mostrar confeti
                    launchConfetti();
                    
                    // Crear notas musicales
                    for (let i = 0; i < 10; i++) {
                        setTimeout(() => createFloatingMusicNote(), i * 100);
                    }
                    
                    // Reproducir sonido
                    if (soundEnabled) {
                        playCelebrationSound();
                    }
                } else {
                    alert('‚ö†Ô∏è ¬°Contador reiniciado! (solo en este dispositivo por ahora)');
                    updateSyncStatus('error');
                }
            } else {
                alert('‚ö†Ô∏è ¬°Contador reiniciado! (solo en este dispositivo - sin conexi√≥n)');
                updateSyncStatus('offline');
            }
            
            // Actualizar display
            updateTimer();
        }
    </script>
</body>
</html>
